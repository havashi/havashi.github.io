---
title: پست جدید به روایت
layout: default
permalink: /drafts/add/
scripts: [pd,pdp]
github: 1
---
    <div class="container pt-3" id="alert" style="display:none;">
      <div class="row">
        <div class="col">
          <div class="alert alert-danger" role="alert">
            روایتی به این نام وجود ندارد.
          </div>
        </div>
      </div>
    </div>
    <div class="container pt-3" id="newPost" style="display:none;">
      <div class="row">
        <h3 class="px-2 text-secondary">پیشنهاد افزودن صفحه جدید به روایت <span class="caseTitle"></span></h3>
      </div>
      <div class="row">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a class="black-text" href="/"><i class="fas fa-home"></i></a></li>
            <li class="breadcrumb-item"><a class="black-text case-link" href=""><span class="caseTitle"></span></a></li>
            <li class="breadcrumb-item active" aria-current="page">افزودن صفحه جدید</li>
          </ol>
        </nav>
      </div>
        <!--Add few elements to the form-->
        {% assign postSlug = page.slug %}
        {% include editForm.html %}
    </div>
<script type="text/javascript">
  $(document).ready(function () {
    var cases = [];
    {% for case in site.cases %}
    cases.push('{{case.slug}}');
    {% endfor %}
    var casePar = urlParams.get('case');
      if (cases.indexOf(casePar) == -1) {
        $('#newPost').hide();
        $('#alert').show();
      } else {
        $('#newPost').show()
        $('#alert').hide();
      }
    console.log(cases);
    $('#txtCase').val(urlParams.get('case'));
    $('.caseTitle').text($("#txtCase option:selected").text());
    $('.case-link').attr('href', '/'+urlParams.get('case'))
    $('#txtSlug').val(urlParams.get('case')+'-'+ makeid(4));
    var to, from;
  to = $("#endDate").persianDatepicker({
    initialValue: false,
    responsive: true,
    format: 'L',
    autoClose: true,
    altField: '#endDateU',
    calendar:{
      persian:{
        showHint: true
      },
      gregorian:{
        showHint: true
      }
    },
    onSelect: function (unix) {
          to.touched = true;
          if (from && from.options && from.options.maxDate != unix) {
              var cachedValue = from.getState().selected.unixDate;
              from.options = {maxDate: unix};
              if (from.touched) {
                  from.setDate(cachedValue);
              }
          }
      }
  });
  from = $("#startDate").persianDatepicker({
    initialValue: false,
    responsive: true,
    format: 'L',
    autoClose: true,
    altField: '#startDateU',
    calendar:{
      persian:{
        showHint: true
      },
      gregorian:{
        showHint: true
      }
    },
    onSelect: function (unix) {
          from.touched = true;
          if (to && to.options && to.options.minDate != unix) {
              to.options = {minDate: unix};
              to.setDate(unix);
          }
      }
  });
  var fromDate = new persianDate();
  var toDate = new persianDate();
  from.setDate(fromDate);
  to.setDate(toDate);

  })
</script>
